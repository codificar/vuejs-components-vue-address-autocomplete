var VueAddressAutocomplete=function(e,t){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=r(t);function o(e,t,r,n,o,s,a){try{var i=e[s](a),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function i(e){o(a,n,s,i,c,"next",e)}function c(e){o(a,n,s,i,c,"throw",e)}i(void 0)}))}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l={name:"VueAddressAutocomplete",props:{AutocompleteParams:{type:Object,default:{filter:{id:null,token:null,latitude:null,longitude:null}}},AutocompleteUrl:{type:String,default:""},GeocodeUrl:{type:String,default:""},PlaceHolderText:{type:String,default:"Escreva o endereço"},NeedAddressNumberText:{type:String,default:"Você não informou o número do endereço, informando-o a busca fica mais precisa."},MinLength:{type:Number,default:5},Delay:{type:Number,default:1e3}},data:function(){return{search_string:"",places_result:[],api_params:{},autocomplete_url:"",geocode_url:"",blur:!1,clicker:"primary"}},methods:{callAutocompleteApi:function(){var e=this;return s(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.blur=!1,t.prev=1,!(e.search_string.length>e.MinLength)){t.next=8;break}return t.next=5,n.default.get(e.autocomplete_url,{params:c(c({},e.api_params),{},{place:e.search_string})});case 5:r=t.sent,(o=r.response).success?(e.places_result=o.data,e.clicker=o.clicker):console.log(o);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},callGeocodeApi:function(e){var t=this;return s(regeneratorRuntime.mark((function r(){var o,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,console.log("callGeocodeApi ROUTE",t.geocode_url),console.log("callGeocodeApi PARAM",{params:c(c({},t.api_params),{},{address:e,clicker:t.clicker})}),r.next=5,n.default.get(t.geocode_url,{params:c(c({},t.api_params),{},{address:e,clicker:t.clicker})});case 5:return o=r.sent,s=o.response,r.abrupt("return",s);case 10:r.prev=10,r.t0=r.catch(0),console.log(r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},handleSelectAddress:function(e){var t=this;return s(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.search_string=e.address,t.places_result=[],!t.checkNumber(e.address)&&t.$toasted.show(t.NeedAddressNumberText,{theme:"bubble",type:"info",position:"bottom-center",duration:5e3}),null==e.place_id){r.next=9;break}return r.next=6,t.callGeocodeApi(e.address);case 6:return(n=r.sent).success?(e.latitude=n.data.latitude,e.longitude=n.data.longitude,t.$emit("addressSelected",e)):t.$emit("addressSelected",e),r.abrupt("return");case 9:t.$emit("addressSelected",e);case 10:case"end":return r.stop()}}),r)})))()},setApiParams:function(){this.api_params=this.AutocompleteParams},handleBlur:function(){var e=this;setTimeout((function(){return e.blur=!0}),250)},debounceSearch:function(e){var t=this;clearTimeout(this.debounce),this.debounce=setTimeout((function(){t.callAutocompleteApi()}),this.Delay)},checkNumber:function(e){return e.split(" ").some((function(e,t){var r=parseInt(e.replace(",","").replace("-",""));return"number"==typeof r&&!isNaN(r)&&t>0}))}},watch:{AutocompleteParams:{handler:function(){this.setApiParams()},immediate:!0}},computed:{show:function(){return this.search_string.length>this.MinLength},showBlur:function(){return this.blur}},mounted:function(){this.autocomplete_url=this.AutocompleteUrl,this.geocode_url=this.GeocodeUrl}};function u(e,t,r,n,o,s,a,i,c,l){"boolean"!=typeof a&&(c=i,i=a,a=!1);const u="function"==typeof r?r.options:r;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,o&&(u.functional=!0)),n&&(u._scopeId=n),s?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},u._ssrRegister=d):t&&(d=a?function(e){t.call(this,l(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,i(e))}),d)if(u.functional){const e=u.render;u.render=function(t,r){return d.call(r),e(t,r)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return r}const d="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function p(e){return(e,t)=>function(e,t){const r=d?t.media||"default":e,n=f[r]||(f[r]={ids:new Set,styles:[]});if(!n.ids.has(e)){n.ids.add(e);let r=t.source;if(t.map&&(r+="\n/*# sourceURL="+t.map.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),n.element||(n.element=document.createElement("style"),n.element.type="text/css",t.media&&n.element.setAttribute("media",t.media),void 0===m&&(m=document.head||document.getElementsByTagName("head")[0]),m.appendChild(n.element)),"styleSheet"in n.element)n.styles.push(r),n.element.styleSheet.cssText=n.styles.filter(Boolean).join("\n");else{const e=n.ids.size-1,t=document.createTextNode(r),o=n.element.childNodes;o[e]&&n.element.removeChild(o[e]),o.length?n.element.insertBefore(t,o[e]):n.element.appendChild(t)}}}(e,t)}let m;const f={};var h=u({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{position:"relative"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.search_string,expression:"search_string"}],staticClass:"form-control",attrs:{type:"text",placeholder:e.PlaceHolderText},domProps:{value:e.search_string},on:{input:[function(t){t.target.composing||(e.search_string=t.target.value)},e.debounceSearch],blur:e.handleBlur}}),e._v(" "),e.show&&!e.blur?r("div",{staticClass:"container_results"},[e._l(e.places_result,(function(t,n){return r("div",{key:n},[r("div",{staticClass:"row_result",on:{click:function(r){return e.handleSelectAddress(t)}}},[r("p",{staticStyle:{"margin-bottom":"0"}},[e._v(e._s(t.main_text))]),e._v(" "),r("p",{staticStyle:{"margin-bottom":"0"}},[e._v(e._s(t.secondary_text))])])])})),e._v(" "),r("hr")],2):e._e()])},staticRenderFns:[]},(function(e){e&&e("data-v-1564c0ea_0",{source:".container_results{position:absolute;z-index:10;background-color:#fff;width:100%}.row_result{cursor:pointer;padding:6px 15px}.row_result:hover{background:#eee}",map:void 0,media:void 0})}),l,void 0,!1,void 0,!1,p,void 0,void 0),g=function(e){g.installed||(g.installed=!0,e.component("VueAddressAutocomplete",h))},v={install:g},_=null;return"undefined"!=typeof window?_=window.Vue:"undefined"!=typeof global&&(_=global.Vue),_&&_.use(v),h.install=g,e.default=h,e}({},axios);